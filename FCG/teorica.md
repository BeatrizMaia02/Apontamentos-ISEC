# Apontamentos de FCG

# Câmara Pinhole (Buraco da agulha)

Uma câmara pinhole é uma máquina fotográfica sem lente.

Este tipo de fotografia é uma prática económica e simples pois utiliza uma caixa qualquer em que a luz não penetra.


Para termos o funcionamento de uma câmara preciso de:
* Uma caixa
* Uma das paredes da caixa forrada com papel sensível à luz
* Uma abertura na caixa por onde entra a luz

__Resultado__

    Não será uma imagem definida.

__Problema__

    Qualquer ponto no nosso plano de imagem vai ser atingido 
    pela luz de todos os lugares da cena.

![image](https://user-images.githubusercontent.com/12052283/87691958-b67ffc80-c77a-11ea-8eba-f0207aecfab2.png)


__O que se pretende__

    Pretende-se que cada ponto do nosso plano de imagem seja
    atingido pela luz de uma pequena região da cena.

__Solução__

    Reduzir a "janela"
    Se reduzirmos muito a janela, vemos de maneira mais nitida
    no entando a imagem inverte e nao fica com muita luz 

![image](https://user-images.githubusercontent.com/12052283/87691877-a1a36900-c77a-11ea-8567-5ce610540e04.png)

__A Distância focal e a Abertura da lente são parâmetros da camara pinhole__

# Distância Focal

É a distância entre o nosso plano de imagem e a abertura.

![image](https://user-images.githubusercontent.com/12052283/87693035-00b5ad80-c77c-11ea-9c5c-38ef6af84bf9.png)


Se aproximarmos o plano da imagem da abertura, os objetos na cena ficam menores, mas é possivel ver mais da cena.
__Neste caso dizemos que o nosso campo de visão (FOV) aumenta.__

Se afastarmos o plano da imagem da abertura, os objetos na cena parecem maiores mas não é capturado tanto da cena.
__Neste caso dizemos que o nosso campo de visão é mais estreino.__

![image](https://user-images.githubusercontent.com/12052283/87693127-1a56f500-c77c-11ea-9d45-42675232e517.png)


__Luz__

Já descobrimos que para fazer uma imagem muito brilhante se
tinha de usar uma grande abertura.Mas com isso, a imagem resultante estava desfocada porque os raios de luz de cada ponto da cena se espalhavam por uma área maior do que o suposto.

Se tivermos uma pequena abertura (como está na imagem abaixo), só apenas um dos raios(vindos do sol por exemplo) atinge o plano.

![image](https://user-images.githubusercontent.com/12052283/87693978-22636480-c77d-11ea-890b-a3df019d1644.png)


Se abertura for maior(como mostra na imagem abaixo) entra mais luz no entanto a definição da imagem diminiu drásticamente.

![image](https://user-images.githubusercontent.com/12052283/87694315-8f76fa00-c77d-11ea-9863-5d71570f8e0d.png)

__Solução__

    Então precisamos de "dobrar a luz ao entrar na abertura para focar num só ponto.

![image](https://user-images.githubusercontent.com/12052283/87694426-b9c8b780-c77d-11ea-83e5-1f64b89c249b.png)

# Lentes

A forma ou curvatura da lente determina com que precisão os raios de luz são curvados.

Se aumentarmos a curvatura da nossa lente, o ponto de foco fica mais proximo da lente.

![image](https://user-images.githubusercontent.com/12052283/87694685-001e1680-c77e-11ea-924e-ecc1a68420c9.png)


Se diminuirmos a curvatura da lente, o ponto de foto fica mais longe da lente.

![image](https://user-images.githubusercontent.com/12052283/87694728-0f9d5f80-c77e-11ea-8896-907774248889.png)

## Tipos de lente

### Lente grande angular (até 35mm)

    É uma lente que foca perto da abertura permitindo ter um
    campo de visão amplo.

### Lente teleobjetiva(50mm até 200mm)

    São lentes que focam a luz mais longe da abertura, permitindo
    capturar a imagem de objetos mais distantes.

### Lente super-teleobjetiva(acima de 200mm)

    São capazes de fotografar objetos que estão realmente muito longe.


## Abertura do diafragma

O diafragma é o diâmetro de abertura das lentes das câmaras fotográficas.

__Quanto maior a abertura do diafragma, mais luz chega ao filme, quanto menos abertura, menos luz.__

### Fórmula do F-stop

    fstop = focal length / diametro da abertura

## FSTOP

    Os fstops são úteis porque nos dizem exatamente quanta luz
     passa independentemente da distância focal da lente.

    Por exemplo, se definirmos um fstop de 2 numa lente de 100
    milímetros, temos a mesma quantidade de luz do que quando usamos
    uma lente de 50 milímetros com o fstop definida para dois.

    Quanto menor o número, maior o diâmetro de abertura do diafragma.
    Logo quanto maior o número, menos luz passa pelas lentes da câmara.

## Profundidade 

Apesar do plano de focagem assumir importância no controlo da profundidade de campo, não se devem confundir os dois conceitos.

    O plano onde é feita a focagem encontra-se nítido, mas
     existirão outras áreas da imagem (para a frente
    e para trás do plano de focagem) onde a imagem apresenta igualmente nitidez.

    A nitidez de uma imagem não dependerá apenas da focagem, mas igualmente de
    outros fatores, que permitem controlar a profundidade de campo.

## Profundidade de campo

Existe uma região, à frente do plano de focagem e atrás do mesmo, que continua a estar focada.

__Chama-se a esta região, profundidade de campo (DOF)__

    É a extensão da área de nitidez de uma determinada imagem.

    A área que se situa entre o fotógrafo e o plano de focagem e
     para além do plano de focagem e que se apresenta nítida.

    Tudo o que estiver fora desta região aparece desfocado.

![image](https://user-images.githubusercontent.com/12052283/87700114-5b9fd280-c785-11ea-99d9-a1914d9f98eb.png)


__Podemos ter uma profundidade de campo reduzida ou ampliada.__


Ao ter uma __Profundidade de Campo Reduzida__ permite ter uma menor parte da cena focada como mostra a imagem em baixo.

![image](https://user-images.githubusercontent.com/12052283/87700482-ebde1780-c785-11ea-8ecd-c338a6613cf8.png)

Ao ter uma __Profundidade de Campo Ampliada__ permite ter uma maior parte da cena focada como mostra a imagem em baixo.

![image](https://user-images.githubusercontent.com/12052283/87700564-09ab7c80-c786-11ea-9c80-ffc4aca06b13.png)

__Os principais fatores que permitem controlar a profundidade do campo são:__

* A abertura do diafragma
* A distância focal da objetiva
* A distância ao plano de focagem

## Circulos de confusão

    Os pontos de uma cena que são intercetados pelo plano do
    foco principal, são projetados como pontos no sensor.

    A luz que forma estes pontos é em forma de cone, por isso
    qualquer ponto da cena em frente ou atrás do plano focal
    são projetados no sensor como circulos(circuilos de confusão).

### NOTA sobre o Diafragma

fstop com número baixo
* Abertura do diafragma grande
* Profundidade de campo reduzida

fstop com número alto
* Abertura do diafragma pequena
* Profundidade de campo ampliada


## Campo de visão (FOV)

![image](https://user-images.githubusercontent.com/12052283/87701778-01544100-c788-11ea-914c-72b7e3aac77b.png)

## Distância focal

    Temos de saber que quanto menor for a distância focal, maior
    vai ser a profundidade de campo que se conseguirá alcançar.

### Exemplo de distância focal

![image](https://user-images.githubusercontent.com/12052283/87701999-555f2580-c788-11ea-9179-ba01727348a4.png)

## Distância ao plano de focagem

A distância ao plano de focagem é a distância da lente ao elemento focado.

    Quanto maior for esta distância, maior será a nossa
    profundidade de campo.

    Quanto menor for a distância, menor será a profundiade
    de campo.

### NOTA sobre profundidade de campo

![image](https://user-images.githubusercontent.com/12052283/87702335-cbfc2300-c788-11ea-8672-bed9574a70d2.png)

# Cor

## Perceção da cor

A __luminosidade__ é a intensidade da luz refletida pela superficie dos objetos, enquanto que, para marcar a diferença, o __brilho__ é a quantidade de luz emitida pelas superficies de objetos luminosos como o Sol ou uma lâmpada.

## Modelo de cor de Munsel

Este modelo estabelece padrões de cor que são empregues na determinação dos parâmetros das cores que o modelo define por comparação entre amostras das cores a determinar com os padrões.

### Parâmetros do Modelo de Munsel
* Cor (Hue)
* Valor (Luminosidade)
* Croma (Saturação)

## Cores visiveis e cores espectrais

    Cores espectrais são cores a que correspondem comprimento
    de onda bem determinados do Espetro Visivel.

    A observação de um Espectro Visivel mostra que nele não se
    encontram todas as cores Visiveis.

    As cores não espectrais são devidas à mistura de luzes com
    diferentes comprimentos ou gamas de comprimentos de onda.

## Teoria dos 3 estrímulos

Qualquer cor(comprimento de onda) do espetro vísivel pode ser reproduzida através da adição dos resultados obtidos pelos estímulos dos três tipos de cones de forma diferente.

Esta teoria parece indicar que bastará emitir 3 cores primárias que sejam detetáveis pelos três tipos de cones da retina para que se possam reproduzir todas as cores visiveis, variando simplesmente a proporção das quantidades de luz emitida por cada uma das fontes primárias.

## Modelo CIE XYZ

__Y__ -> Denominado Luminosidade, está associado ao brilho. (Refletância do objeto).

__X__ e __Z__ -> Associados a informações de cromaticidade(tom e saturação).

__O diagrama de cromaticidade apresenta algumas propriedades importantes.__

![image](https://user-images.githubusercontent.com/12052283/87705723-dec52680-c78d-11ea-95b1-033199768735.png)


    Um segmento de reta que una os pontos representativos de
    duas cores, representa todas as cores possiveis de obter
    pela mistura dessas duas cores.

    Quando essas duas cores forem o iluminante branco
    de referência e uma cor pura, o quociente entre a
    distância da cor resultante à cor pura e a distância
    da cor pura ao iluminante de referência
    corresponde à saturação da cor.

    O comprimento de onda dominante desta cor é o comprimento
    de onda característico da cor pura.

As cores obtidas por decomposição da luz solar ou artificialmente mediante focos emissoeres de luz de uma longitude de onda determinada, denominam se de __cores aditivas__.

## Modelo Aditivo

### Modelo RGB

    É o sistema de cores, utilizado nos monitores de computadores
    e outros sistemas digitais.

    Para representar uma cor no sistema RGB atribui-se um valor
    entre 0 e 255 (notação decimal) ou entre 00 e FF
    (notação hexadecimal) para cada um
    dos componentes vermelho, verde e azul
    que o formam.


![image](https://user-images.githubusercontent.com/12052283/87706823-ab839700-c78f-11ea-811e-f674358f8778.png)


## Modelo Subtrativo

### Modelo CMY

    Baseia-se na subtração da luz.

    As cores cião, magenta e amarelo são designadas cores
    primárias subtrativas.
    O seu efeito consiste em subtrair ou absorver alguma cor
    da luz branca.

    A partir destas três cores podemos obter quase todas as
    demais, salvo o branco e o negro.


![image](https://user-images.githubusercontent.com/12052283/87707130-23ea5800-c790-11ea-8b9f-326ac34e6765.png)


### Modelo CMYK

    Efetivamente, o conjunto de pigmentos ciano, magenta e
    amarelo não produz a cor branca, e sim uma cor cinza sujo
    , neutro.

    Quanto ao negro, também não é possível obtê-lo a partir
    dos primários, sendo necessário incluí-lo no conjunto de
    cores bárias subtrativas, obtendo-se o modelo CMYK.


### Modelo HSV

    Baseia-se na perceção humana da cor do ponto de vista
    dos artistas plásticos.

    Os artistas plásticos para obterem as várias cores
    das suas pinturas, combinam a tonalidade com elementos
    de brilho e saturação.


__HSV (Hue,Saturation,Value)__

__Value__
* Topo (V = 1)
* Cores mais brilhantes

__Hue(Ângulo em torno do eixo vertical)__
* 0º = vermelho
* 180º = verde
* Duas cores que façam 180º são complementares

__Saturação__
* Centro = 0
* Periferia = 1

![image](https://user-images.githubusercontent.com/12052283/87707753-2c8f5e00-c791-11ea-874b-afa3ff573d4c.png)


__As cores primárias ocupam no espaço HSV os vertices do hexágono e encontram-se dispostas segundo um ângulo correspondente de acordo com a tabela em baixo.__

![image](https://user-images.githubusercontent.com/12052283/87707851-4df04a00-c791-11ea-8042-56f2fd253337.png)

__Uma saturação de 1 significa que a cor é pura(está na periferia), enquanto que uma saturação de 0 significa que a cor é totalmente branca e o valor de H é irrelevante.__

__O parâmetro V corresponde à intensidade da cor e vai entr 0 (preto) e 1 (intensidade máxima).__

__Normalmente os tons cinzentos encontram-se localizados sobre o eixo da pirâmide em que S = 0, sendo H indiferente.__


### Modelo HLS

    A siga deste modelo é Hue, Lightness, Saturation.

    A representação tridimensional do espaço de cor deste modelo
    é constituida por 2 cones unidos pelas bases.

    As cores primárias estão situadas no perimetro da base
    comum e as cores brancas e negra no vertice de cada um
    dos cones.

    Os tons de cinzento localizam-se sobre o eixo comum dos 2
    cones.

![image](https://user-images.githubusercontent.com/12052283/87708311-0ae2a680-c792-11ea-9379-e491b20a5057.png)

__H corresponde novamente ao ângulo em que a cor se encontra, tomando a cor vermelha como origem.__

__O parâmetro S têm o mesmo significado que no HSV.__

__As cores puras têm uma saturação de 1, enquanto que as cores com saturação de 0 correspondem a cores brancas de intensidade variavel(cinzenetos) para as quais o parâmetro H não tem qualquer significado.__

__O parâmetro L pode variar entre 0, que corresponde a luminosidade nula, e 1 que equivale a luminosidade máxima que só é possível para a cor branca.__

__Note-se que as cores puras apresentam uma luminosidade de 0,5.__

# Iluminação

## Fontes de Luz

Uma fonte de luz pode ser condizerada como uma superficie, em que cada ponto emite luz caracterizada pela direção da emissão e pela intensidade em cada frequência.

### Luz Pontual

    É uma luz que têm uma posição e emite luz em todas as direções.

### Luz Direcional
    
    É uma luz em que os raios de luz são todos paralelos entre si.
    Ou seja, seguem todos a mesma direção.

### Luz Ambiente

    Refere-se a um tipo de iluminação que não vem diretamente
    de uma fonte de luz, consistindo numa luz que foi refletida
    várias vezes que já não se considera que venha de de
    nenhuma direção especifica.

    A luz ambiente é o motivo pelo qual as sombras não são
    absolutamente negras.

__Caracteristinas da luz ambiente__
* Sem posição nem direção definidas
* Intensidade constante
* Sem atenuação

### Fonte de luz direcional

    Fonte de luz sem localização precisa(ou no infinito).

    Sem atenuação da intensidade luminosa com a distância.

    Os raios luminosos são paralelos, possuindo uma direção
    precisa.


### Fonte de luz pontual

    Localizada numa posição do espaço.

    Emite luz igual em todas as direções.

    Consoante a distância, a intensidade luminosa vai
    diminuindo.


### Spotlight

    Semelhante à luz pontual, em que a emissão de luz se
    encontra limitada a um ângulo sólido de abertura variada,
    cujo eixo é a direção de emissão.

__Diferença entre Spotlight e Luz Pontual__

Enquanto que a Luz Pontual emite igualmente em todas as direções, a Spotlight emite preferencialmente numa direção e têm um ângulo sólido de abertura que pode variar.

## Reflexão Especular 

    Na reflexão especular perfeita ("espelhada"), um raio de luz
    que entra é refletido intacto na superfície.

![image](https://user-images.githubusercontent.com/12052283/87724791-9157b200-c7ab-11ea-90a0-271c0a03e60e.png)

## Reflexão Difusa

    Na reflexão difusa, um raio de luz que chega é espelhado
    em todas as direções igualmente.

![image](https://user-images.githubusercontent.com/12052283/87725272-80f40700-c7ac-11ea-8d6b-6282c0690231.png)

## Reflexão Especular - Difusa

Quando temos uma reflexão especular e difusa simultâneamente no mesmo objeto/material, podemos cor diferentes para a componente especular e para a componente difusa.

    A cor difusa é a cor básica do objeto.

    A cor especular determina a cor dos realces especulares.

## Modelo de Iluminação de PHONG

    O modelo de iluminação de Phong considera que os materiais,
    quanto ao modo como refletem a energia luminosa, são uma
    combinação linear de um material que reflete toda a energia
    numa única direção, reflexão especular e de um material que
    reflete toda a energia luminosa de igual modo em todas as
    direções, reflexão difusa.

    O modelo considera ainda a existência de uma componente de
    luz Ambiente a qual simula a existência de iluminação
    global, isto é, de energia luminosa que é refletida por
    todas as restantes superfícies presentes numa cena e que
    ilumina a superfície.

__Tem 3 parâmetros__

* Difuso: iluminação e sombras não brilhantes
* Especular: Reflexos brilhantes
* Ambiente: Iluminação de fundo

![image](https://user-images.githubusercontent.com/12052283/87725947-b64d2480-c7ad-11ea-94d9-a5c9b4e5488b.png)


## Expressão global do modelo de iluminação local de phong

![image](https://user-images.githubusercontent.com/12052283/87727170-f9a89280-c7af-11ea-9c83-66c276d670b9.png)

O modelo de Phong ...

Garante compromisso equilibrado entre
* Grau de realismo
* Carga computacional

Modela a intensidade luminosa
* Combinação linear de 3 componentes
    * Reflexão ambiente
    * Reflexão difusa
    * Reflexão especular

# Métodos de sombreamento

Para aplicar um modelo de iluminação é necessário calcular a normal a cada faceta.

Como se vai utilizar o modelo de iluminação de Phong, a normal é a única entidade que representa a geometria da faceta pelo que terá sempre que ser calculada.

## Sobreamento constante

__Para cada polígono__
* Determina um único valor de intensidade
* Usa esse valor para sombrear todo o polígono

__Premissas__
* Fonte de luz no infinito
* Observador está posicionado no infinito
* O poligono representa a superficie real que está a ser modelada


    No modelo do sombreamento constante é utilizada a normal à
    faceta para calcular uma cor, a qual é usada para sombrear
    todo a faceta.

    Sabendo a posição da fonte de luz, a normal à faceta e as
    propriedades do material, é possivel aplicar o modelo de
    reflexão de Phong e obter uma intensidade da energia
    luminosa refletida.


__Resultado do Sombreamento Constante__

    Os resultados são de baixa qualidade uma vez que ficam
    visiveis as diferenças de cor nas fronteiras entre
    facetas.

__Problemas no Sombreamento Constante__

    Nas arestas comuns visualizam-se as intensidades mais
    baixas como sendo ainda menores e a intensidade mais
    elevada como ainda sendo maior.

    Este efeito visivel nas arestas designa-se por efeito de
    bandas de Mach.

## Smooth Shading

__Introduzir valores das normais em cada vértice__
* Geralmente diferente da normal da faceta
* Usado apenas para sombreamento
* Pensado como uma melhor aproximação da superficie real

__Sombreamento usando Aproximações Interpoladas__
* Sombreamento de Gouraud
* Sombreamento de Phong(diferente do modelo de ilumi. de Phong)


## Sombreamento de Gouraud
### Calculo da Normal

Para o caso apresentado em que o vértice A é partilhado por 4 facetas, o cálculo da normal nesse vértice obtem-se a partir de:

![image](https://user-images.githubusercontent.com/12052283/87851297-f8c64c80-c8e6-11ea-9796-a7422cbac2cf.png)

![image](https://user-images.githubusercontent.com/12052283/87851305-0976c280-c8e7-11ea-8332-6da615522491.png)


## Sombreamento de Phong

No método de sombreamento de Phong, a partir das normais aos vértices, que são calculadas do mesmo modo que no sombreamento de Gourad, é calculada a normal a cada quadrícula através da interpolação das normais.

A normal calculada para cada quadrícula é então usada com o modelo de iluminação de Phong para calcular a intensidade da energia luminosa refletida.

## Exemplo de Sombreamento de Phong e Gouraud

__Sendo A onde está situado o observador e a fonte de luz.__

    A iluminação dos pontos 2 e 3 pelos sombreamentos de Phong e
    Gouraud é a mesma, porque são 2 vértices.

    No entanto, porque o ângulo entre a direção da reflexão
    especular perfeita e a direção do observador é agora muito
    maior, a iluminação em 2 e 3 é menos intensa.

    Consequentemente, a interpolação de intensidades do
    sombreamento de Gouraud entre os pontos 2 e 3 pode fazer
    desaparecer qualquer brilho que exista no ponto 1.

![image](https://user-images.githubusercontent.com/12052283/87851411-f44e6380-c8e7-11ea-9139-bb0090badd18.png)


__Sendo B onde está situado o observador e a fonte de luz.__

    O ponto 2 ia estar intensamente iluminado.

    Esta iluminação elevada faria com que o sombreamento de
    Gouraud alargasse exageradamente a zona com o brilho na
    direção do ponto 3, quando, na realidade esta zona estaria
    confinada a uma área mais restrita próxima do ponto 2.


### Sombreamento de Phong vs Sombreamento de Gouraud

    O método de Phong é mais pesado do que o sombreamento de 
    Gouraud, uma vez que é necessário calcular a cor, por
    aplicação do modelo de sombreamento de Phong a todas as
    quadrículas da faceta e normalizar as normais locais.

## Limitações do Sombreamento usando aproximações interpoladas

* Silhueta poligonal
* Distorção de perspetiva
* Orientação de polígonos
* Vértices não partilhados
* Normais incorretas nos vértices

## Silhueta Poligonal

    Este problema manifesta-se no aspeto poligonal das silhuetas
    dos objetos de cena tesselados por polígonos.

    Tesselações que produzem polígonos de menor dimensão
    reduzirão os efeitos desta limitação, à custa de um
    processamento mais pesado, mas não resolverão
    totalmente o problema.

## Métodos de sombreamento(luz direta)

__Sombreamento constante__
* Calcula a iluminação de Phong uma vez para todo o polígono

__Sombreamento de Gouraud__
* Usa o método de iluminação de Phong nos vértices e interpola os valores de iluminação no polígono

__Sombreamento de Phong__
* Interpola as normais ao longo do polígono e executa a iluminação de Phong ao longo do polígono

# Técnicas de iluminação

## O que é que se considera quando se elimina?

* Intensidade e tamanho da luz
* Cor(Temperatura)
* Direção 

### Intensidade e tamanho da luz

    Uma luz maior cria uma imagem mais suave e difusa, com
    sombras mais suaves.

    Uma fonte de luz mais focada e mais dura pode criar mais
    tensao.

### Cor (Temparatura)

    Uma luz mais fria e azul pode criar sensação de frio
    e tristeza.

    Uma luz laranja quente e suave pode criar uma atmosfera
    mais amigável e aberta.

### Direção

    Luz frontal pode tornar o personagem mais aberto e
    acessível.

    Uma personagem em contraluz pode parecer mais sombrio
    e perigoso.

    Uma personagem iluminado por baixo vai parecer mais
    assustador



# Técnicas de iluminação

## Técnica de iluminação de 3 pontos

    Esta técnica é basicamente um método de iluminação
    em que se usam 3 posições distintias de fonte de luz
    para iluminar um ponto de interesse numa cena.

![image](https://user-images.githubusercontent.com/12052283/87855060-5d909f80-c905-11ea-8fae-10668e9a802b.png)


## Luz Principal (Key light)

    Vai ser a fonte de luz mais intensa e direita de toda a
    cena.

    Deve ser a primeira luz a ser configurada e será usada
    para iluminar a forma do ator.

    Geralmente é colocada na frente do ator e ligeiramente de
    lado para criar alguma dimensão e profundidade.

__Pontos chave__
* A luz principal não deve estar perto da câmara porque isso fará com que a ilumin. fique plana e sem carácter


## Luz de Preenchimento (Fill light)

    Iluminar as sombras criadas pela luz principal. Essa luz
    adiciona luz às sombras e reduz o contraste.

    Um exemplo desta luz é por exemplo a luz do céu.

    Geralmente é colocada no lado oposto da luz principal,
    e geralmente é muito mais escura que a
    luz principal.

__Pontos Chave__
* É importante que o preenchimento permaneça indistinto e não crie sombras ou suas próprias caracteristicas.

* Quanto mais perto a luz de preenchimento estiver da câmara, menos sombras ela criará

## Luz de Fundo (Back light ou Rim light)

    Atinge um ator ou objeto por trás e geralmente é colocada
    acima do objeto que se pretende iluminar.

    É frequentemente usada para separar um objeto ou ator
    de um fundo escuro e dar ao objeto mais forma e profundiade
    , delineando-o com uma borda de luz.

    Uma luz de fundo é diferente de uma luz no
    fundo, que normalmente ilumina o fundo da
    cena, e não o personagem.

__Pontos Chave__
* Quando se usa apenas a luz de fundo sem luz principal e a de preenchimento consegue-se obter uma silhueta


## Técnica de iluminação de 3 pontos

__Posição tradicional da iluminação de 3 pontos__

    A luz de fundo é colocada em frente à
    luz principal, fora da cena, para criar
    uma separação, pois esse lado do cena
    será mais escuro.

![image](https://user-images.githubusercontent.com/12052283/87855626-13a9b880-c909-11ea-93f7-93772e780378.png)


## Soft light

    É um termo que descreve o tamanho de uma fonte de luz e
    não de um posicionamento em si

## High Key

    É um estilo de iluminação brilhante e sem sombras, com
    muita luz de preenchimento.

## Luz lateral (side light)

    Uma luz lateral é uma luz que vem do lado paralelo ao ator.

    Ideal para criar um clima dramático e muito usada com 
    iluminação claro-escuro

# Iluminação de Cena

    Aqui ajustam-se as luzes para apoiar cada uma das cenas

__Objetivos__

* Direcionar a atenção do espectador, para levá-lo a olhar para onde se pretende
* Fazer as cenas trabalhar em conjunto
* Tornar os personagens interessantes


# Texturas

## Mapeamento de texturas

    O termo textura refere-se a padrões de imagem e não à
    "sensação" de materiais.

## Tipos de texturas

__Texturas de bitmap__
* Representação de imagens em bitmap
* Representado por uma matriz
* Tem tamanho definido, nao são infinitas

__Texturas procedimentais__
* Definido por uma função matemática
* Não ha tamanho definido, sao infinitas

    * Adequada para texturas aleatórias
    * Utiliza alguma função de ruído

### Espaço UV

__U__ -> Representa o componente horizontal de uma imagem (eixo X)

__V__ -> Representa o componente vertical de uma imagem (eixo Y)

__W__ -> Representa o eixo Z

## Mapeamento de Texturas

### Bump Mapping(Mapeamento de relevo)

    O mapeamento de texturas deixa as superficeis com uma
    aparência plana

    A adição de detalhes extras na malha pode ser
    computacionalmente muito caro

* Usar o mapa de textura para perturbar a superficie normal
* Usar a matriz de textura para definir uma função que altera a normal da superficie
* Aplicar o modelo de iluminação usando a normal alterada
* Usa uma textura para alterar a normal para poder alterar a iluminação
* Aplicado durante a rasterização

![image](https://user-images.githubusercontent.com/12052283/87858926-04366980-c921-11ea-8346-0cba7d9e9958.png)


### Displacement mapping (Mapeamento de deslocamento)

    O mapeamento de relevo altera apenas o sombreamento da
    superficie, não a geometria real

    O mapeamento de deslocamento altera a superficie usando a
    textura como uma malha definida em coordenadas uv

![image](https://user-images.githubusercontent.com/12052283/87859073-1b298b80-c922-11ea-814c-078f893df152.png)

* Subdividir a superfície para o nível da resolução de textura
* Desloca os vértices segundo a direçãonormal da superfície de acordo com a altura no mapa de deslocamento

__O Displacement mexe na geometria, o Bump não mexe na geometria, mexe só na iluminação.__

# Aliasing e Anti-aliasing

__NOTA__
__Uma das maneiras de combater o Aliasing é adicionar ruido__


## Aliasing

    A discretização de uma grandeza contínua implica perda de
    informação.

    A partir de uma certa perda, os valores discretos medidos
    são insuficientes para reconstruir a grandeza original.
     
     Quando tal sucede, a reconstrução produz
    informação que pouco ou nada reproduz a informação original.

### Como surge o Aliasing?

__Quando a frequência de amostragem é demasiado baixa para representar o sinal.__

## Antialiasing de texturas

    Quando as texturas são ampliadas, os pixeis individuais
    da textura(texels) são claramente visiveis

    Com o zoom reduzido, vários texels podem ser
    mapeados para um único pixel

## Interpolação Bilinear

    Calculando a média dos texels vizinhos com base nas
    coordeandas uv e usá-la para o pixel atual

## Mip Mapping

    As texturas são produzidas em várias resoluções

    As resoluções são alteradas dependendo do nr de texels
    por pixel

    É selecionada uma resolução onde a relação de texels para
    pixel é de 1:1

__Os mipmaps são versões menores e pré-filtradas de uma imagem de textura, representando diferentes níveis de detalhe da texutra.__

### Vantagens do Mip Mapping

* Melhor qualidade de imagem
    * O uso do mipmapping pode ajudar a eliminar os efeitos de aliasing causados por texturas de superamostragem

* Melhor desempenho
    * O mipmapping aumenta a eficiência da cache pois as texturas em tamanho normal não são necessárias com tanta frequência e os mipmaps de menor resolução cabem facilmente na cache de textura

### Desvantagem do Mip Mapping

* Aumento no tamanho do arquivo de texturas, pois a cadeia mipmap completa deve ser armazenada juntamente com a textura de resolução total.

* Isso aumenta o tamanho do arquivo em 33%

# Composição

### Remoção de superficies ocultas

Sempre que uma imagem contém objetos ou superficies opacas, aqueles que se encontram mais próximos do observador e diretamente na linha de vista de outros objetos, vão bloquear a visão destes últimos.

As superficies ocultas devem ser removidas de modo a que a imagem representada no ecrã seja realista.

## Estratégias Algoritmicas

### Algoritmos no Espaço Objeto

    Concentram-se na relação geométrica entre objetos no modelo
    de descrição da cena, com o fim de determinar que partes
    desses objetos são visiveis

    Estes algoritmos trabalham com uma precisão arbitrária,
    podendo a imagem final ser aumentada várias vezes sem perda
    de qualidade

    Orientados para dispositivos de visualização vetoriais

    Operações complexas devido aos cálculos geométricos,
    logo tem elevada carga computacional

__Complexidade Algoritmica__

    Para uma cena de N objetos a ser desenhada num dispositivo
    de visualização com P pixeis, a complexidade é de
    N x N

### Algoritmos no Espaço Imagem

    Determinam para cada quadrícula de imagem, qual o objeto
    que é visivel

    Limitados a uma precisão bastante inferior, imposta pela
    resolução da superficie de visualização

    Orientados para dispositivos raster, portanto são mais
    suscetiveis ao aliasing

    Operações simples de manipulação de coordenadas espaciais
    dos pontos de imagem, logo a carga computacional é menor

__Complexidade Algoritmica__

    Para uma cena de N objetos a ser desenhada num dispositivo
    de visualização com P pixeis, a complexidade é de 
    N x P


### Algoritmo do Pintor

    Desenha superficies de trás para a frente, com os polígonos
    mais próximos a serem "pintados" sobre outros

    Precisa encontrar a ordem para desenhar objetos

![image](https://user-images.githubusercontent.com/12052283/87878217-71560780-c9d2-11ea-807a-ce730938b1c4.png)


__Problema do Algoritmo do Pintor__

    O principal problema é determinar a ordem


## Algoritmo Z-Buffer

__Permite calcular qual o objeto que se encontra mais próximo da câmara e que ocupa uma dada quadrícula.__

Tornou-se um dos mais utilizador algoritmos de visibilidade

Este facto deve-se à sua simplificade que lhe permite uma fácil implementação quer em software quer em hardware.

__O que é que ele precisa?__

    Precisa de 2 áreas de memória, uma para a construção da
    imagem(frame-buffer) e outra para armazenamento de 
    profundidades Z(z-buffer)


__Passos do algoritmo Z-Buffer__

* Inicializar o Z-buffer com a profundidade máxima e a memória de imagem(frame-buffer) com a cor de fundo
* Percorrer todos os polígonos segundo uma ordem arbitrária
* Para cada polígono
    * Para cada fragmento da posição (x,y)

        * Se Z(fragmentado) < Z(x,y)

        * WriteZ(x,y,Z(fragmento))

        * WritePixel(x,y,Cor(fragmento))

![image](https://user-images.githubusercontent.com/12052283/87878518-3d7be180-c9d4-11ea-889f-06ba547b4fa7.png)

__O final da execução do algoritmo Z-buffer tem armazenado num buffer as cores de cada objeto/quadricula e noutro, o Z-buffer , as distâncias de todos os objetos tambem por quadricula, à câmara.__

__Desempenho do Z-Buffer__

* Sobrecarga de memória
* Pode ser necessário a sua combinação com outros métodos de recorte para reduzir a complexidade


## Árvores BSP (Binary space partition tree)

    Representa a cena com uma árvore

    A cena é desenhada atravessando a árvore

    Adequado para fazer a renderização de cenas estáticas


__Passos__

* Escolher um polígono arbitrariamente
* Dividir a cena em semi-espaços frontais (em relação à normal) e traseiros
* Dividir qualquer polígono que esteja sobre os dois lados
* Escolher um polígono de cada lado - dividir a cena novamente
* Divida recursivamente

__Representando uma árvore bsp__

    A árvore pode ser atravessada para obter uma ordem dos
    polígonos para um ponto de vista arbitrário

    De trás para a frente, usando o Algoritmo do Pintor

    Da frente para trás(usando o z-buffer) -> mais eficiente


__A geração da árvore requer muito esforço computacional.__

__É fácil, verificar a visibilidade depois da árvore ser construída.__

__Muito eficiente quando a cena não muda frequentemente.__


É um método combinado com Z-buffer.

### Seleção de visibilidade de árvores bsp

    As árvores BSP podem ser usadas para selecionar polígonos
    que caem fora do volume de visualização

        Se o plano intersetar o volume, subdivide para ambos
        os filhos.

        Se o volume de visualização estiver de um dos lados
        do plano, selecionar objetos do outro lado.

## Classificação do espaço objeto e do espaço da imagem

__Técnicas do Espaço Objeto - aplicadas à geometria da malha:__
* Árvores BSP com o Algoritmo do Pintor, seleção de portais

__Técnicas do Espaço Imagem - aplicadas quando os pixeis são desenhados:__
* Z-buffer

## Remoção de superficies ocultas

    O algoritmo Z-buffer é facil de implementar em hardware
    e é uma técnica padrão

    Há a necessidade de combinar o Z-buffer com uma abordagem
    baseada em objeto quando existem muitos polígonos - árvores
    BSP, seleção de portais

    A travessia da frente para trás reduz o custo

# Transparência

## Alpha blending

__Valores alfa descrevem a opacidade de um objeto__

* 1 significa totalmente opaco
* 0 significa totalmente transparente

## Ordenar por profundidade

    A profundidade e cor de todos os fragmentos que serão
    projetados no mesmo pixel é armazenado numa lista.

    As cores vão ser misturadas de trás para a frente


## Ordenamento

    O ordenamento é caro (árvore BSP)
    
    O ordenamento por pixel é muito caro

__Uma solução mais rápida seria a transparência "Porta de Rede"__

## Transparência "porta de rede"

    O objeto é sólido, mas é desenhado com furos usando um
    padrão pontilhado como uma porta de rede

    A proporção de pixeis desenhados é igual ao valor alfa

    Não há necessidade de realizar o ordenamento, os objetos
    podem ser desenhados em qualquer ordem

    O Z-buffer pode lidar com as sobreposições de superficies
    translúcidas


## Transparência estocástica

    Usando multisampling, os subpixeis são desenhados e a cor
    do pixel é calculada usando a média dessas cores

    Usa um padrão aleatório pontilhado de sub-pixel

    Não é necessário ordenamento

    A cor final de um pixel é calculada pela média das cores
    dos sub-pixéis